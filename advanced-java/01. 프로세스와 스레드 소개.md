## 01. 프로세스와 스레드 소개

## 멀티태스킹과 멀티프로세싱
### 멀티태스킹 (Multitasking)
- 현재의 CPU는 초당 수십억 번 이상의 연산을 수행한다.
- 쉽게 이야기해서 초당 수십억 장의 사진이 빠르게 교차되는 것이다.
- 만약 CPU가 매우 빠르게 두 프로그램의 코드를 번갈아 수행한다면, 사람이 느낄 때 두 프로그램이 동시에 실행되는 것처럼 느껴질 것이다.
  - 대략 0.01초(10ms) 단위로 돌아가며 실행한다.
- 이렇게 각 프로그램의 실행 시간을 분할해서 마치 동시에 실행되는 것 처럼 하는 기법을 **시분할(Time Sharing, 시간 공유) 기법** 이라 한다.
  - 이런 방식을 사용하면 CPU 코어가 하나만 있어도 여러 프로그램이 동시에 실행되는 것처럼 느낄 수 있다.
- 하나의 컴퓨터 시스템이 동시에 여러 작업을 수행하는 능력을 **멀티태스킹**이라 한다.


### 멀티프로세싱 (Multiprocessing)
- 컴퓨터 시스템에서 둘 이상의 프로세서(CPU 코어)를 사용하여 여러 작업을 동시에 처리하는 기술을 의미한다.
- 멀티프로세싱 시스템은 하나의 CPU 코어만을 사용하는 시스템보다 동시에 더 많은 작업을 처리할 수 있다.


### 멀티프로세싱 VS 멀티태스킹
- 멀티프로세싱
  - 멀티프로세싱은 하드웨어 장비의 관점이다.
  - 여러 CPU(여러 CPU 코어, 프로세싱)를 사용하여 동시에 여러 작업을 수행하는 것을 의미한다.
  - 하드웨어 기반으로 성능을 향상시킨다.
  - 예) 다중 코어 프로세서를 사용하는 현대 컴퓨터 시스템
- 멀티태스킹
  - 멀티태스킹은 운영체제 소프트웨어의 관점이다.
  - 단일 CPU(단일 CPU 코어, 프로세싱)가 여러 작업을 동시에 수행하는 것처럼 보이게 하는 것을 의미한다.
  - 소프트웨어 기반으로 CPU 시간을 분할하여 각 작업에 할당한다.
  - 예) 현대 운영 체제에서 여러 애플리케이션이 동시에 실행되는 환경


## 프로세스와 스레드
![img.png](images/프로세스와%20스레드.png)


### 프로세스
- 프로그램을 실행하면 프로세스가 만들어지고 프로그램이 실행된다.
  - 이렇게 운영체제 안에서 **실행중인 프로그램을 프로세스**라 한다.
- 프로세스는 실행 중인 프로그램의 **인스턴스**이다.
  - 자바 언어로 비유를 하자면 클래스는 프로그램이고, 인스턴스는 프로세스다.
- 각 프로세스는 **독립적인 메모리 공간**을 갖고 있으며, 운영체제에서 별도의 작업 단위로 분리해서 관리된다.
  - 각 프로세스는 별도의 메모리 공간을 갖고 있기 때문에 서로 간섭하지 않는다.
  - 그리고 프로세스가 서로의 메모리에 직접 접근할 수 없다.
- 프로세스는 서로 격리되어 관리되기 때문에, **하나의 프로세스가 충돌해도 다른 프로세스에는 영향을 미치지 않는다.**
  - 특정 프로세스(프로그램)에 심각한 문제가 발생하면 해당 프로세스만 종료되고, 다른 프로세스에 영향을 주지 않는다.


### 프로세스의 메모리 구성
- 코드 섹션
  - 실행할 프로그램의 코드가 저장되는 부분
- 데이터 섹션
  - 전역 변수 및 정적 변수가 저장되는 부분
- 힙 (Heap)
  - 동적으로 할당되는 메모리 영역
- 스택 (Stack)
  - 메서드(함수) 호출 시 생성되는 지역 변수와 반환 주소가 저장되는 영역(스레드에 포함)


### 스레드 (Thread)
- **프로세스는 하나 이상의 스레드를 반드시 포함한다.**
  - 스레드는 프로세스 내에서 실행되는 작업의 단위이다.
  - 한 프로세스 내에서 여러 스레드가 존재할 수 있으며, 이들은 프로세스가 제공하는 동일한 메모리 공간을 공유한다.
  - 스레드는 프로세스보다 단순하므로 생성 및 관리가 단순하고 가볍다.


### 스레드의 메모리 구성
- 공유 메모리
  - 같은 프로세스의 코드 섹션, 데이터 섹션, 힙(메모리)은 프로세스 안의 모든 스레드가 공유한다.
- 개별 스택
  - 각 스레드는 자신의 스택을 갖고 있다.


### 스레드의 역할
- 스레드는 프로세스 내에서 실행되는 작업의 단위이다.
  - 프로세스의 코드를 실행하는 흐름을 **스레드**라 한다.
- 한 프로세스 내에 하나의 스레드가 존재할 수 있고, 한 프로세스 내에 여러 스레드가 존재할 수도 있다.
  - 단일 스레드 : 한 프로세스 내에 하나의 스레드만 존재
  - 멀티 스레드 : 한 프로세스 내에 여러 스레드가 존재
- 그리고 스레드는 프로세스가 제공하는 동일한 메모리 공간을 공유한다.
- **하나의 프로세스 안에는 최소 하나의 스레드가 존재**한다.
  - 그래야 프로그램이 실행될 수 있다.