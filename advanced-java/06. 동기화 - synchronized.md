# 06. 동기화 - synchronized

## 멀티스테드를 사용할 때 가장 주의해야 할 점
- 같은 자원(리소스)에 여러 스레드가 동시에 접근할 때 발생하는 동시성 문제이다.
  - 참고로 여러 스레드가 접근하는 자원을 **공유 자원**이라 한다.
  - 대표적인 공유 자원은 인스턴스의 필드(멤버 변수)이다.


## 임계 영역(critical section)
- 여러 스레드가 동시에 접근하면 데이터 불일치나 예상치 못한 동작이 발생할 수 있는 위험하고 또 중요한 코드 부분을 뜻한다.
- 여러 스레드가 동시에 접근해서는 안 되는 공유 자원을 접근하거나 수정하는 부분을 의미한다.
  - 예) 공유 변수나 공유 객체를 수정


## synchronized 메서드
- 모든 객체(인스턴스)는 내부에 자신만의 락(lock)을 가지고 있다.
  - 모니터 락(monitor lock)이라고도 부른다.
  - 객체 내부에 있고 우리가 확인하기는 어렵다.
  - 자바에서 기본으로 제공한다.
- 스레드가 **synchronized** 키워드가 있는 메서드에 접근하려면 반드시 해당 인스턴스의 락이 있어야 한다.


### 참고
- **락을 획득하는 순서는 보장되지 않는다.**
  - 어떤 순서로 락을 획득하는지는 자바 표준에 정의되어 있지 않다.
  - 따라서 순서를 보장하지 않고, 환경에 따라 순서가 달라질 수 있다.
- **volatile를 사용하지 않아도 synchronized 안에서 접근하는 변수의 메모리 가시성 문제는 해결된다.**