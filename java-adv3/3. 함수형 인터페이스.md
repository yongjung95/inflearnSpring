# 3. 함수형 인터페이스

## 기본 함수형 인터페이스
### 자바가 제공하는 대표적인 함수형 인터페이스
- `Function` 
  - 입력 O, 반환 O
  - 하나의 매개변수를 받고, 결과를 반환하는 함수형 인터페이스.
  - 예) 문자열을 받아서 정수로 변환, 객체를 받아서 특정 필드 추출 등
- `Consumer`
  - 입력 O, 반환 X
  - 입력 값만 받고, 결과를 반환하지 않는 연산을 수행하는 함수형 인터페이스.
  - 예) 컬렉션에 값 추가, 콘솔 출력, 로그 작성, DB 저장 등
- `Supplier`
  - 입력 X, 반환 O
  - 입력을 받지 않고, 어떤 데이터를 공급 해주는 함수형 인터페이스.
  - 예) 객체나 값 생성, 지연 초기화 등에 주로 사용
- `Runnable`
  - 입력 X, 반환 X
  - 입력 값도 없고 반환 값도 없는 함수형 인터페이스.
  - 자바에서는 원래부터 스레드 실행을 위한 인터페이스로 쓰였지만, 자바 8 이후에는 람다식으로도 많이 표현.
  - 예) 주로 멀티스레딩에서 스레드의 작업을 정의할 때 사용


## 특화 함수형 인터페이스
- 특화 함수형 인터페이스는 의도를 명확하게 만든 조금 특별한 함수형 인터페이스.

### 특화 함수형 인터페이스
- `Predicate`
  - 입력 O, 반환 Boolean
  - 입력 값을 받아서 `true` 또는 `false로 구분 하는 함수형 인터페이스
  - 예) 조건 검사, 필터링 등의 용도로 많이 사용
  - "입력 값을 받아 `true/false`로 결과를 판단한다" 라는 의도를 `명시적으로 드러내기 위해 정의된 함수형 인터페이스`
  - `목적(조건 검사)과 용도(필터링 등)에 대해 더 분명히 표현하고, 가독성과 유지보수`를 위해 별도의 함수형 인터페이스가 마련됨.
- `Operator`
  - 입력 O, 반환 O
  - 동일한 타입의 연산 수행, 입력과 같은 타입을 반환하는 연산 용도
  - `UnaryOperator(단항 연산)`
    - 하나의 피연산자에 대해 연산을 수행하는 것을 말한다.
    - 예) 숫자의 부호 연산, 논리 부정 연산 등
  - `BinaryOperator(이항 연산)`
    - 두 개의 피연산자에 대해 연산을 수행하는 것을 말한다.
    - 같은 타입의 두 입력을 받아 같은 타입의 결과를 반환할 때 사용
    - 예) 두 수의 덧셈, 곱셈, 둘 중 더 큰 값 등
  - 단항 연산이고 타입이 동일하다면 `UnaryOperator<T>`를 이항 연산이고 타입이 동일하다면 `BinaryOperator<T>`를 쓰는 것이 개발자의 `의도와 로직을 더 명확히 표현`하고,
  가독성을 높일 수 있는 장점이 있다.


### 기타 함수형 인터페이스
- 매개변수가 2개 이상 필요한 경우에는 BiXxx 시리즈를 사용하면 된다. 
  - 예) BiFunction , BiConsumer , BiPredicate


### 입력 값이 3개라면?
- 이런 함수형 인터페이스는 기본으로 제공하지 않는다. 
- 보통 함수형 인터페이스를 사용할 때 3개 이상의 매개변수는 잘 사용하지 않기 때문이다.
- 만약 입력값이 3개일 경우라면 다음과 같이 직접 만들어서 사용하면 된다


### 기본형 지원 함수형 인터페이스
- 기본형 지원 함수형 인터페이스가 존재하는 이유
  - 오토박싱/언박싱(auto-boxing/unboxing)으로 인한 성능 비용을 줄이기 위해
  - 자바 제네릭의 한계(제네릭은 primitive 타입을 직접 다룰 수 없음)를 극복하기 위해
    - 자바의 제네릭은 기본형(primitive) 타입을 직접 다룰 수 없어서, Function<int, R> 같은 식으로는 선언할 수 없다.
- Function
  - IntFunction 은 매개변수가 기본형 int 이다.
  - ToIntFunction 은 반환 타입이 기본형 int 이다.
  - IntToLongFunction 은 매개변수가 int , 반환 타입이 long 이다.
  - IntToIntFunction 은 없는데, IntOperator 를 사용하면 된다.
- 기타
  - IntOperator : Operator는 매개변수와 반환 타입이 같다. 따라서 이 경우 int 입력, int 반환이다.
  - IntConsumer : 매개변수만 존재한다. int 입력
  - IntSupplier : 반환값만 존재한다. int 반환
  - IntPredicate : 반환값은 boolean 으로 고정이다. int 입력, boolean 반환


## 정리
### 함수형 인터페이스와 제네릭
- 함수형 인터페이스에 제네릭을 도입하면 코드 재사용성과 타입 안전성을 모두 확보할 수 있다.
- 직접 Object 타입을 사용하는 방식( ObjectFunction )은 다양한 타입을 다룰 수 있지만, 다운캐스팅 과정이 필요하고 타입 안정성이 떨어진다.
- 제네릭 타입을 사용하면 컴파일 시점에 타입 체크가 이루어지므로, 런타임 에러를 방지할 수 있고 유연한 코드를 작성할 수 있다

### 람다와 타겟 타입
- 람다는 그 자체로 타입이 정해져 있지 않고, 어떤 함수형 인터페이스에 대입되느냐(타겟 타입)에 따라 타입이 결정된다.
- 같은 람다라도 FunctionA 에 대입하면 FunctionA 타입이 되고, FunctionB 에 대입하면 FunctionB 타입이 된다.
- 이미 한 번 특정 함수형 인터페이스 타입으로 대입된 람다는, 시그니처가 같더라도 다른 함수형 인터페이스 타입으로 대입할 수 없다.

### 자바가 제공하는 기본 함수형 인터페이스
- Function<T, R>
  - 하나의 매개변수를 받아 결과를 반환한다.
- Consumer<T>
  - 하나의 매개변수를 받아서 소비(처리)만 하고, 반환값은 없다.
- Supplier<T>
  - 매개변수가 없고, 값을 공급(생성)하여 반환한다.
- Runnable
  -  매개변수와 반환값이 모두 없는 실행 작업을 나타낸다(주로 스레드 실행).
  

### 특화 함수형 인터페이스
- Predicate<T>
  - 입력값을 받아 조건을 검사(필터링)하고 boolean 을 반환한다.
- UnaryOperator<T>
  - 하나의 같은 타입 입력을 받아 같은 타입을 반환(단항 연산)한다.
- BinaryOperator<T>
  - 두 개의 같은 타입 입력을 받아 같은 타입을 반환(이항 연산)한다.
- 이외에도 매개변수가 2개 이상인 경우 BiFunction<T, U, R> , BiConsumer<T, U> , BiPredicate<T, U> 등이 있으며, 기본형(primitive) 전용 함수형 인터페이스( IntFunction , IntPredicate 등)도 별도로 제공한다.