## 7. 빈 후처리기

### 빈 후처리기
#### 빈 후처리기란?
- 빈을 생성한 후에 무언가를 처리하는 용도로 사용한다.


#### 빈 후처리기 기능
- 객체를 조작할 수도 있고, 완전히 다른 객체로 바꿔치기 하는 것도 가능하다.


#### 빈 후처리기 과정
![img.png](images/빈%20후처리기%20과정.png)
1. 생성 : 스프링 빈 대상이 되는 객체를 생성한다. (**Bean**, 컴포넌트 스캔 모두 포함)
2. 전달 : 생성된 객체를 빈 저장소에 등록하기 직전에 빈 후처리기에 전달한다.
3. 후 처리 작업 : **빈 후처리기**는 전달된 스프링 빈 객체를 조작하거나 다른 객체로 바꿔치기 할 수 있다.
4. 등록 : **빈 후처리기**는 빈을 반환한다. 전달된 빈을 그대로 반환한하면 해당 빈이 등록되고, 바꿔치기 하면 다른 객체가 빈 저장소에 등록된다.

### 다른 객체로 바꿔치는 빈 후처리기
- 스프링 빈 등록 과정 - 바꿔치기
![img_1.png](images/다른%20객체로%20바꿔치는%20빈%20후처리기.png)


### 빈 후처리기 사용법
```java
public interface BeanPostProcessor {
 Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException
 Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException
}
```
- **빈 후처리기**를 사용하려면 **BeanPostProcessor** 인터페이스를 구현하고, 스프링 빈으로 등록하면 된다.
- **postProcessBeforeInitialization**
  - 객체 생성 이후에 **@PostConstruct** 같은 초기화가 발생하기 전에 호출되는 포스트 프로세서이다.
- **postProcessAfterInitialization**
  - 객체 생성 이후에 **@PostConstruct** 같은 초기화가 발생한 다음에 호출되는 포스트 프로세서이다.


### 빈 후처리기 정리
- **빈 후처리기**는 빈을 조작하고 변경할 수 있는 후킹 포인트이다.
- 빈 객체를 조작하거나 심지어 다른 객체로 바꾸어 버릴 수 있을 정도로 막강하다.
- 컴포넌트 스캔의 대상이 되는 빈들은 중간에 조작할 방법이 없는데, **빈 후처리기**를 사용하면 개발자가 등록하는 모든 빈을 중간에 조작할 수 있다.
- **빈 객체를 프록시로 교체**하는 것도 가능하다.