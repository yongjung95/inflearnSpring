## 4. 데이터 접근 기술 - MyBatis

* ### MyBatis
  * `JdbcTemplate`보다 더 많은 기능을 제공하는 `SQL Mapper`이다.
  * 장점
    * `JdbcTemplate`과 비교해서 `SQL`을 `XML`에 편리하게 작성할 수 있다.
    * 동적 쿼리를 매우 편리하게 작성할 수 있다.
  * 단점
    * 약간의 설정이 필요하다.


* ### `Mapper`인터페이스의 설정 원리
  ![img.png](images/Mapper%20%EC%84%A4%EC%A0%95%20%EC%9B%90%EB%A6%AC.png)
  * 애플리케이션 로딩 시점에 `MyBatis` 스프링 연동 모듈은 `@Mapper`가 붙어있는 인터페이스를 조사한다.
  * 해당 인터페이스가 발견되면 동적 프록시 기술을 사용해서 `ItemMapper` 인터페이스의 구현체를 만든다.
  * 생성된 구현체를 스프링 빈으로 등록한다.


* ### `Mapper` 구현체
  * 마이바티스 스프링 연동 모듈이 만들어주는 `Mapper` 구현체 덕분에 인터페이스 만으로 편리하게 `XML`의 데이터를 찾아서 호출할 수 있다.
  * `Mapper` 구현체는 예외 변환까지 처리해준다.
    * `MyBatis`에서 발생한 예외를 스프링 예외 추상화인 `DataAccessException`에 맞게 변환해서 반환해준다. (`JdbcTemplate`이 제공하는 예외 변환 기능을 여기서도 제공한다고 이해하면 된다.)
  * 정리
    * `Mapper` 구현체 덕분에 `MyBatis`를 스프링에 편리하게 통합해서 사용할 수 있다.
    * `Mapper` 구현체를 사용하면 스프링 예외 추상화도 함께 적용된다.
    * `MyBatis` 스프링 연동 모듈이 많은 부분을 자동으로 설정해주는데, 데이터베이스 커넥션, 트랜잭셕과 관련된 기능도 `MyBatis` 와 함께 연동하고, 동기화해준다.