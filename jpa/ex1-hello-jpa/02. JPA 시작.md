## 02. JPA 시작

### 데이터베이스 방언
- **JPA**는 특정 데이터베이스에 종속 ❌
- 각각의 데이터베이스가 제공하는 **SQL** 문법과 함수는 조금씩 다름
  - 가변 문자 : **MySQL**은 **VARCHAR**, **Oracle**은 **VARCHAR2**
  - 문자열을 자르는 함수 : **SQL** 표준은 **SUBSTRING()**, **Oracle**은 **SUBSTR()**
  - 페이징 : **MySQL**은 **LIMIT**, **Oracle**은 **ROWNUM**
- 방언 : **SQL 표준**을 지키지 않는 특정 데이터베이스만의 고유 기능


### JPA 구동 방식
![img.png](images/JPA%20구동%20방식.png)


### 주의
- **엔티티 매니저 팩토리**는 하나만 생성해서 애플리케이션 전체에서 공유
- **엔티티 매니저**는 쓰레드간에 공유 ❌ (사용하고 버려야 한다.)
- **JPA의 모든 데이터 변경은 트랜잭션 안에서 실행**


### JPQL?
#### JPQL 등장배경
- **JPA**를 사용하면 엔티티 객체를 중심으로 개발하기 때문에, 검색 쿼리가 문제이다.
- 검색을 할 때도 테이블이 아닌 엔티티 객체를 대상으로 검색하기 때문에, 모든 DB 데이터를 객체로 변환해서 검색하는 것은 불가능하다.
- 애플리케이션이 필요한 데이터만 DB에서 불러오려면 결국 검색 조건이 포함된 **SQL**이 필요하다.


#### JPQL 정의
- **JPA**는 **SQL**을 추상화한 **JPQL**이라는 **객체 지향 쿼리** 언어를 제공한다.
- 테이블이 아닌 **객체를 대상으로 검색하는 객체 지향 쿼리** 이다.
- **SQL**을 추상화해서 **특정 데이터베이스 SQL**에 의존 ❌
- 한 마디로 **객체 지향 SQL** 이다.
- **SQL**과 문법은 유사하며, **SELECT, FROM, WHERE, GROUP BY, HAVING, JOIN 을 지원**한다.
 

#### JPQL과 SQL의 차이
- **JPQL**은 **엔티티 객체**를 대상으로 쿼리
- **SQL**은 **데이터베이스 테이블**을 대상으로 쿼리